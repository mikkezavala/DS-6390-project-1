"0","library(dplyr)"
"0",""
"0","# Load dataset"
"0","df <- read.csv(""risk_factors_reduced.csv"", stringsAsFactors = FALSE)"
"0",""
"0","max_size <- 2500"
"0","# Rename columns with spaces (using backticks when needed)"
"0","df_clean <- df |> sample_n(max_size) %>%"
"0","  rename("
"0","    `Year` = year,"
"0","    `Age_Group` = age_group_5_years,"
"0","    `Race_Ethnicity` = race_eth,"
"0","    `First_Degree_History` = first_degree_hx,"
"0","    `Age_Menarche` = age_menarche,"
"0","    `Age_First_Birth` = age_first_birth,"
"0","    `Breast_Density` = BIRADS_breast_density,"
"0","    `Hormone_Replacement_Therapy` = current_hrt,"
"0","    `Menopause_Status` = menopaus,"
"0","    `BMI_Group` = bmi_group,"
"0","    `Biopsy_History` = biophx,"
"0","    `Breast_Cancer_History` = breast_cancer_history,"
"0","    `Count` = count"
"0","  ) %>%"
"0","  "
"0","  # Replace coded values with human-readable labels"
"0","  mutate("
"0","    `Age_Group` = case_when("
"0","      `Age_Group` == 1 ~ ""18-29"","
"0","      `Age_Group` == 2 ~ ""30-34"","
"0","      `Age_Group` == 3 ~ ""35-39"","
"0","      `Age_Group` == 4 ~ ""40-44"","
"0","      `Age_Group` == 5 ~ ""45-49"","
"0","      `Age_Group` == 6 ~ ""50-54"","
"0","      `Age_Group` == 7 ~ ""55-59"","
"0","      `Age_Group` == 8 ~ ""60-64"","
"0","      `Age_Group` == 9 ~ ""65-69"","
"0","      `Age_Group` == 10 ~ ""70-74"","
"0","      `Age_Group` == 11 ~ ""75-79"","
"0","      `Age_Group` == 12 ~ ""80-84"","
"0","      `Age_Group` == 13 ~ "">85"","
"0","      TRUE ~ ""Unknown"""
"0","    ),"
"0","    "
"0","    `Race_Ethnicity` = case_when("
"0","      `Race_Ethnicity` == 1 ~ ""Non-Hispanic White"","
"0","      `Race_Ethnicity` == 2 ~ ""Non-Hispanic Black"","
"0","      `Race_Ethnicity` == 3 ~ ""Asian/Pacific Islander"","
"0","      `Race_Ethnicity` == 4 ~ ""Native American"","
"0","      `Race_Ethnicity` == 5 ~ ""Hispanic"","
"0","      `Race_Ethnicity` == 6 ~ ""Other/Mixed"","
"0","      `Race_Ethnicity` == 9 ~ ""Unknown"","
"0","      TRUE ~ ""Unknown"""
"0","    ),"
"0",""
"0","    `First_Degree_History` = case_when("
"0","      `First_Degree_History` == 0 ~ ""No"","
"0","      `First_Degree_History` == 1 ~ ""Yes"","
"0","      `First_Degree_History` == 9 ~ ""Unknown"","
"0","      TRUE ~ ""Unknown"""
"0","    ),"
"0",""
"0","    `Age_Menarche` = case_when("
"0","      `Age_Menarche` == 0 ~ "">14"","
"0","      `Age_Menarche` == 1 ~ ""12-13"","
"0","      `Age_Menarche` == 2 ~ ""<12"","
"0","      `Age_Menarche` == 9 ~ ""Unknown"","
"0","      TRUE ~ ""Unknown"""
"0","    ),"
"0",""
"0","    `Age_First_Birth` = case_when("
"0","      `Age_First_Birth` == 0 ~ ""<20"","
"0","      `Age_First_Birth` == 1 ~ ""20-24"","
"0","      `Age_First_Birth` == 2 ~ ""25-29"","
"0","      `Age_First_Birth` == 3 ~ "">30"","
"0","      `Age_First_Birth` == 4 ~ ""Nulliparous"","
"0","      `Age_First_Birth` == 9 ~ ""Unknown"","
"0","      TRUE ~ ""Unknown"""
"0","    ),"
"0",""
"0","    `Breast_Density` = case_when("
"0","      `Breast_Density` == 1 ~ ""Almost entirely fat"","
"0","      `Breast_Density` == 2 ~ ""Scattered fibroglandular densities"","
"0","      `Breast_Density` == 3 ~ ""Heterogeneously dense"","
"0","      `Breast_Density` == 4 ~ ""Extremely dense"","
"0","      `Breast_Density` == 9 ~ ""Unknown"","
"0","      TRUE ~ ""Unknown"""
"0","    ),"
"0",""
"0","    `Hormone_Replacement_Therapy` = case_when("
"0","      `Hormone_Replacement_Therapy` == 0 ~ ""No"","
"0","      `Hormone_Replacement_Therapy` == 1 ~ ""Yes"","
"0","      `Hormone_Replacement_Therapy` == 9 ~ ""Unknown"","
"0","      TRUE ~ ""Unknown"""
"0","    ),"
"0",""
"0","    `Menopause_Status` = case_when("
"0","      `Menopause_Status` == 1 ~ ""Pre- or Peri-menopausal"","
"0","      `Menopause_Status` == 2 ~ ""Post-menopausal"","
"0","      `Menopause_Status` == 3 ~ ""Surgical Menopause"","
"0","      `Menopause_Status` == 9 ~ ""Unknown"","
"0","      TRUE ~ ""Unknown"""
"0","    ),"
"0",""
"0","    `BMI_Group` = case_when("
"0","      `BMI_Group` == 1 ~ ""10-24.99"","
"0","      `BMI_Group` == 2 ~ ""25-29.99"","
"0","      `BMI_Group` == 3 ~ ""30-34.99"","
"0","      `BMI_Group` == 4 ~ ""35+"","
"0","      `BMI_Group` == 9 ~ ""Unknown"","
"0","      TRUE ~ ""Unknown"""
"0","    ),"
"0",""
"0","    `Biopsy_History` = case_when("
"0","      `Biopsy_History` == 0 ~ ""No"","
"0","      `Biopsy_History` == 1 ~ ""Yes"","
"0","      `Biopsy_History` == 9 ~ ""Unknown"","
"0","      TRUE ~ ""Unknown"""
"0","    ),"
"0",""
"0","    `Breast_Cancer_History` = case_when("
"0","      `Breast_Cancer_History` == 0 ~ ""No"","
"0","      `Breast_Cancer_History` == 1 ~ ""Yes"","
"0","      `Breast_Cancer_History` == 9 ~ ""Unknown"","
"0","      TRUE ~ ""Unknown"""
"0","    )"
"0","  )"
"0",""
"0",""
"0","# Save cleaned data as CSV for D3.js"
"0","write.csv(df_clean, ""risk_factors_reduced_named.csv"", row.names = FALSE)"
"0",""
"0","# Print success message"
"0","cat(""CSV file 'risk_factors_reduced_named.csv' created successfully!"")"
"1","CSV file 'risk_factors_reduced_named.csv' created successfully!"
"0","# json_data <- toJSON(data, pretty = TRUE)"
"0","# "
"0","# write(json_data, ""risk_factors_reduced.json"")"
